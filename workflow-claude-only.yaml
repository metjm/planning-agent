# Single-agent Claude-only workflow configuration
# This configuration enables session persistence for planning->revision continuity.

agents:
  claude:
    command: "claude"
    args:
      - "-p"
      - "--output-format"
      - "stream-json"
      - "--verbose"
      - "--dangerously-skip-permissions"
    allowed_tools:
      - "Read"
      - "Glob"
      - "Grep"
      - "Write"
      - "Edit"
      - "WebSearch"
      - "WebFetch"
      - "Skill"
      - "Task"
    # Enable conversation persistence for planning->revision continuity (Claude-only feature)
    session_persistence:
      enabled: true
      strategy: conversation_resume

workflow:
  planning:
    agent: claude
    # Note: max_turns applies to BOTH planning AND revision phases.
    # Set high enough for complex plans that may require multiple revision cycles.
    max_turns: 200

  reviewing:
    agents:
      - claude
    aggregation: any_rejects

  # Note: Revision phase uses the planning agent automatically.
  # With session_persistence enabled, revision resumes the planning session context.

# Failure handling policy (uses defaults)
# failure_policy:
#   max_retries: 2
#   backoff_secs: 5
#   on_all_reviewers_failed: abort

# Implementation workflow configuration
# Disabled for single-agent configs because implementation-review requires
# a different agent than the implementing agent. To enable implementation,
# add a second agent (e.g., codex or gemini) and configure it as the reviewer.
implementation:
  enabled: false
